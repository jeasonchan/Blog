# 1 前言
参考文章：

前端开发如何独立解决跨域问题     https://segmentfault.com/a/1190000010719058


本地进行前端开发时，经常使用nodejs写一个桩服务（假设使用4200端口，IP就直接是localhost）；然后，webstorm启动前端工程，由于4200已经被桩服务占用，前端工程必须用别的端口，比如4222，同时将前端里的请求IP和端口都设置成桩服务的localhost:4200。

经过以上设置，从http协议层来看，链路都是通的，访问桩服务接口应该是没啥问题，但是！！！！console里开始报错了，无法访问桩服务暴露的接口，原因在哪里？

原因在于浏览器的同源策略，也就是页面内发出的http请求，只能向页面URL的域名下面的路径发送，也就是被网页调的接口和网元必须是同源的！同源包括三个方面：
* 域名，没有负载均衡的话就是同一个IP
* 端口
* 协议

由于前端工程的访问URL是，localhost：4222/xxxx/xxxx，因此，页面调用的接口也必须在localhost:4222上，但是端口监听又是进程独占的！不同的进程无法监听同一个端口。

怎么办才规避一台机器开发时的浏览器同源策略问题呢？

分别介绍已经淘汰和目前主流的解决方案。

# 2 JSONP和CORS
解决跨域问题已经不常用的解决方案有两个：

* JSONP：利用script标签可跨域的特点，在跨域脚本中可以直接回调当前脚本的函数。因为script必须依靠加速站点，才能迅速将jquery或者其他依赖的脚本缓存到浏览器，而脚本的加速站点一般都是使用公共的（有些大厂是有私有地script加速接节点），尽管这些加速点和页面URL不同源，但是script标签不受同源策略限制。

* CORS：服务器设置HTTP响应头中Access-Control-Allow-Origin值，解除跨域限制。

但是这两个跨域方案都存在一个致命的缺陷，严重依赖后端的协助。
**开发中遇到的每一个接口都需要提前找后端进行特殊处理**。而且即使后端愿意帮忙，某些接口也不是随便能开放的（譬如已经在线上正式环境的接口）。

所以依赖后端协助的跨域解决方式都会在一定程度上限制前端的开发进度。

# 3 Nginx(正向/反向)代理

## 3.1 正向代理介绍


## 3.2 反向代理介绍


## 3.3 正向代理实现跨域


## 3.4 反向代理实现跨域




# 4 项目上线后不需要反向代理
项目上线后，是直接通过域名前端服务的，比如：www.baidu.com，前端调用的后端api也是直接挂在www.baidu.com域名后面的，不存在跨域调用问题。
