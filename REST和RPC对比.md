# 1 REST介绍
REST是一种架构风格，指的是一组架构约束条件和原则。满足这些约束条件和原则的应用程序或设计就是 RESTful。REST规范把所有内容都视为资源，网络上一切皆资源。

REST并没有创造新的技术，组件或服务，只是使用Web的现有特征和能力。 可以完全通过HTTP协议实现，使用 HTTP 协议处理数据通信。REST架构对资源的操作包括获取、创建、修改和删除资源的操作正好对应HTTP协议提供的GET、POST、PUT和DELETE方法。

之前提到的约束条件和原则包括:
* 最好能做到无状态
* 可以cache
* 分层系统 (想起了无数的架构?)
* 统一的接口 (如果这是可能的,程序员有福了, :D)
* code on demand(可选, 其实是一种扩展性的要求)

以上所有的都是基于HTTP的，HTTp是WWW的最核心的协议, 它将简单的分布于世界各个角落的资源都统一起来：
* 统一的地址
* 简单的方法
* 一定数量的表达方式

相对应的，REST 的三个要素就是：
* 唯一的资源标识
* 简单的方法 (此处的方法是个抽象的概念)
* 一定的表达方式.

REST 是以 资源 为中心, 名词即资源的地址, 动词即施加于名词上的一些有限操作, 表达是对各种资源形态的抽象.

以HTTP为例, 名词即为URI(统一资源标识), 动词包括POST, GET, PUT, DELETE等(还有其它不常用的2个,所以 整个动词集合是有限的), 资源的形态(如text, html, image, pdf等)。REST架构对资源的操作包括获取、创建、修改和删除资源的操作正好对应HTTP协议提供的GET、POST、PUT和DELETE方法：

![REST动词和HTTP动词对照表](https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=137802124,3403121526&fm=173&app=49&f=JPEG?w=640&h=321&s=E1158F7415F84C2D0ED055CB0200A0B9)


# 2 RPC介绍
RPC 即远程过程调用, 很简单的概念, 像调用本地服务(方法)一样调用服务器的服务(方法)，通常的实现有 XML-RPC , JSON-RPC , 通信方式基本相同, 所不同的只是传输数据的格式。(如果你已经习惯于XML繁重的尖括号,你不妨可以尝试下更加轻型,高效,传输效率高的 JSON。)一个简单的通信过程通常为:
**Request**
```xml
<?xml version="1.0"?>
<methodCall>
  <methodName>member.get_username_by_id</methodName>
  <params>
    <param>
        <value><i4>1</i4></value>
    </param>
  </params>
</methodCall>
```
**Response**
```xml
<?xml version="1.0"?>
<methodResponse>
  <params>
    <param>
        <value><string>Zhu Tao</string></value>
    </param>
  </params>
</methodResponse>
```
远程方法调用，就是像调用本地方法一样调用远程方法。常见RPC框架结构图：
![常见RPC框架结构](https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1796673822,345432463&fm=173&app=49&f=JPEG?w=640&h=384&s=D800DF141BF6448A137188C8030080B1)

RPC框架要做到的最基本的三件事：
1. 服务端如何确定客户端要调用的函数？

在远程调用中，客户端和服务端分别维护一个【ID->函数】的对应表， ID在所有进程中都是唯一确定的。客户端在做远程过程调用时，附上这个ID，服务端通过查表，来确定客户端需要调用的函数，然后执行相应函数的代码。

2. 如何进行序列化和反序列化？

客户端和服务端交互时将参数或结果转化为字节流在网络中传输，那么数据转化为字节流的或者将字节流转换成能读取的固定格式时就需要进行序列化和反序列化，序列化和反序列化的速度也会影响远程调用的效率。

3. 如何进行网络传输（选择何种网络协议）？

多数RPC框架选择TCP作为传输协议，也有部分选择HTTP。(HTTP和TCP的区别和联系  https://www.cnblogs.com/baizhanshi/p/8482612.html 。)

如gRPC使用HTTP2。不同的协议各有利弊。TCP更加高效，而HTTP在实际应用中更加的灵活。

# 3 对比
RPC是以动词为中心的, REST是以名词为中心的, 此处的 动词指的是一些方法, 名词是指资源。

以动词为中心，意味着，当要需要加入新功能时,你必须要添加更多的动词, 这时候服务器端需要实现 相应的动词(方法), 客户端需要知道这个新的动词并进行调用；而以名词为中心, 假使我请求的是 hostname/friends/, 无论这个URI对应的服务怎么变化,客户端是无需 关注和更新的,而这种变化对客户端也是透明的。

典型的应用场景：当你每天使用HTTP上网时,你都在使用 REST 与远程的服务器进行亲密接触. 当你使用Gtalk和同事朋友沟通时,你则是在享受着 RPC 的便利。

都是网络交互的协议规范。通常用于多个微服务之间的通信协议。

## 3.1 REST与RPC应用场景
REST和RPC都常用于微服务架构中。
1. HTTP相对更规范，更标准，更通用，无论哪种语言都支持http协议。如果你是对外开放API，例如开放平台，外部的编程语言多种多样，你无法拒绝对每种语言的支持，现在开源中间件，基本最先支持的几个协议都包含RESTful。
2.  RPC 框架作为架构微服务化的基础组件，它能大大降低架构微服务化的成本，提高调用方与服务提供方的研发效率，屏蔽跨进程调用函数（服务）的各类复杂细节。让调用方感觉就像调用本地函数一样调用远端函数、让服务提供方感觉就像实现一个本地函数一样来实现服务。
# 4 总结
REST调用及测试都很方便，RPC就显得有点繁琐，但是RPC的效率是毋庸置疑的，所以建议在多系统之间的内部调用采用RPC。对外提供的服务，Rest更加合适。



